import React from "react";
import "../../App.css";
import "../../css/sideBar.css";
import $ from "jquery";
import "tippy.js/dist/tippy.css";
import "tippy.js/animations/perspective.css";
import tippy from "tippy.js";
class Sidebar extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      sources: []
    };
  }

  static getDerivedStateFromProps(props, state) {
    return { sources: props.sortSource };
  }

  componentDidMount() {
    /*
      Fonction qui va permettre de déterminer quel filtre est mis en place. Dans un premier temps on va regarder si
      le filtre est dans le localstorage. Si c'est le cas alors on va activer le bouton correspondant et activer le
      filtre pour la recherche
    */
    if (window.localStorage.getItem("order")) {
      let order = window.localStorage.getItem("order");
      let str = "[data-order=" + order + "]";
      $(str).addClass("active");
      $("#" + order + '[fill="grey"]').attr("fill", "white");
      this.props.callbackOrder(order);
    } else {
      window.localStorage.setItem("order", "relevance");
      $("[data-order=relevance]").addClass("active");
      $('[data-order=relevance] [fill="grey"]').attr("fill", "white");
    }
    if (window.localStorage.getItem("freshness")) {
      let freshness = window.localStorage.getItem("freshness");
      let str = "#" + freshness + "";
      $(str).addClass("active");
      $("#" + freshness + " [fill=grey]").attr("fill", "white");
      this.props.callbackFreshness(freshness);
    } else {
      window.localStorage.setItem("freshness", "all");
      $("#all").addClass("active");
      $("#all [fill=grey]").attr("fill", "white");
    }
    this.addToolTip();
  }

  addToolTip() {
    tippy(
      [
        document.getElementById("pertinence"),
        document.getElementById("les_plus_recents"),
        document.getElementById("all"),
        document.getElementById("all"),
        document.getElementById("hour"),
        document.getElementById("day"),
        document.getElementById("week"),
        document.getElementById("week"),
        document.getElementById("month")
      ],
      {
        content: "Appuyez ici pour trier par pertinence",
        placement: "top",
        animation: "perspective",
        delay: [400, 100]
      }
    );
  }
  handleChangeSource = e => {
    /*
      Fonction qui va permettre d'afficher et d'activer le filtre par source. L'event est envoyé d'un bouton qui 
      contient en attribut le nom du site.
    */
    let target = $(e.target);
    let domain = target.attr("id");
    this.props.callbackSource(domain);
    $(".source_b").removeClass("active");
    target.addClass("active");
  };

  handleChangeOrder = e => {
    /*
      Fonction qui va permettre d'afficher et de changer le filtre pertinance/date. L'event est envoyé d'un 
      bouton qui contient un attribut "data-order" qui vaux soit "revelance" soit "freshness". Cette valeur
      est stockée dans le localstorage afin que si l'user actualise la page on revienne sur le même filtre
    */
    let target = $(e.target);
    let order = target.attr("data-order");
    window.localStorage.setItem("order", order);
    if (order !== undefined) {
      this.props.callbackOrder(order);
      $(".trier_b").removeClass("active");
      $('.trier_b [fill="white"]').attr("fill", "grey");
      target.addClass("active");
      $("#" + order + '[fill="grey"]').attr("fill", "white");
    }
  };

  handleChangeFreshness = e => {
    /*
      Fonction qui va permettre d'afficher et de changer le filtre par période. L'event est envoyé d'un
      bouton qui contient comme attribut un "id" qui vaut par exemple "all" ou "week" ou encore "hour".
      On récupère cet id et on le met en filtre.
    */
    let target = $(e.target);
    let freshness = target.attr("id");
    window.localStorage.setItem("freshness", freshness);
    if (freshness !== undefined) {
      this.props.callbackFreshness(freshness);
      $(".periode_b").removeClass("active");
      $('.periode_b [fill="white"]').attr("fill", "grey");
      $("#" + freshness).addClass("active");
      $("#" + freshness + '[fill="grey"]').attr("fill", "white");
    }
  };

  HideAndDisplaySB = e => {
    e.preventDefault();
    var index = $(e.target).val();
    if (!index) {
      index = e.target.id;
    }

    var classe = $(".trie" + index);
    console.log(classe);
    $(document).ready(function() {
      $(classe).animate(
        {
          height: "toggle"
        },
        650
      );
    });
  };

  render() {
    if (this.state.sources) {
      var toAppendSources = this.state.sources.map(row => (
        <li id="SideBar-Source" key={row.value}>
          <button
            className={row.label === "All" ? "source_b active" : "source_b"}
            type="button"
            id={row.value}
            onClick={this.handleChangeSource}
          >
            {row.label === "All" ? "Toutes" : row.label}
          </button>
        </li>
      ));
    }
    return (
      <div id="formsidebar">
        <link
          href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
          rel="stylesheet"
        ></link>
        <form id="SideBar">
          <fieldset>
            <label id="Mode">
              <button
                className="button_hide"
                style={{
                  margin: "0",
                  padding: "0",
                  height: "35px",
                  width: "100%"
                }}
                value="1"
                onClick={this.HideAndDisplaySB}
              >
                <b id="1">Trier par</b>
              </button>
            </label>
          </fieldset>
          <ul id="listbutton" className="trie1">
            <li>
              <button
                className="trier_b"
                type="button"
                id="pertinence"
                data-order="relevance"
                data-tippy-content="Cliquez ici pour filtrer les résultats par pertinence"
                onClick={this.handleChangeOrder}
              >
                <svg
                  className="trier_s"
                  id="pertinence"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    stroke="none"
                  >
                    <path
                      id="relevance"
                      d="M2900 4932 c0 -4 -15 -13 -34 -20 -44 -16 -104 -75 -127 -126 -16 -35 -19 -68 -19 -231 -2 -736 -79 -1014 -357 -1276 -114 -107 -309 -252 -395 -293 -40 -19 -102 -39 -137 -45 -73 -12 -98 -30 -107 -76 -8 -43 16 -89 56 -105 73 -30 263 42 433 164 388 278 575 537 642 886 30 158 37 255 43 576 6 258 10 335 21 347 11 14 32 17 102 17 142 0 235 -42 302 -136 52 -75 57 -136 57 -746 l0 -550 29 -29 c38 -37 88 -39 128 -5 l28 24 0 574 c0 636 -2 658 -67 790 -59 118 -185 212 -323 241 -30 6 -55 15 -55 19 0 4 -49 8 -110 8 -60 0 -110 -4 -110 -8z M3080 3410 c-33 -30 -33 -31 -27 -103 11 -137 64 -230 175 -304 119 -80 86 -77 823 -83 l655 -5 42 -27 c43 -29 93 -94 119 -155 31 -77 16 -180 -34 -225 -28 -26 -102 -55 -158 -63 -93 -14 -134 -53 -120 -116 9 -41 39 -62 101 -70 81 -11 143 -46 181 -102 62 -92 62 -198 -1 -280 -64 -83 -128 -107 -292 -107 -109 0 -130 -8 -150 -56 -12 -29 -12 -39 -1 -66 16 -38 40 -51 121 -67 33 -6 77 -22 98 -36 122 -81 138 -268 31 -366 -62 -58 -84 -64 -275 -67 -174 -4 -177 -4 -202 -29 -19 -19 -26 -36 -26 -65 0 -52 32 -84 94 -93 87 -13 146 -78 146 -161 0 -46 -28 -94 -73 -128 -28 -21 -36 -21 -730 -24 -730 -3 -831 1 -967 39 -38 10 -154 60 -258 110 -103 50 -220 102 -260 115 -81 27 -242 64 -284 64 -38 0 -78 -38 -84 -81 -8 -47 31 -96 84 -104 20 -4 92 -20 159 -36 123 -29 155 -42 378 -156 133 -68 251 -106 377 -123 55 -7 338 -10 838 -8 l755 3 48 24 c64 31 138 105 173 172 24 46 29 66 29 134 0 61 -5 90 -21 122 l-21 41 36 7 c91 17 195 84 259 167 103 134 110 330 17 467 l-34 51 41 21 c65 33 143 118 183 200 33 68 35 78 35 174 0 96 -2 106 -35 173 -19 39 -50 89 -69 110 l-36 39 43 44 c23 25 54 69 70 99 24 50 27 66 27 159 0 101 -1 104 -44 194 -54 113 -128 192 -225 240 l-66 32 -660 5 c-644 5 -661 6 -705 26 -78 36 -110 89 -125 206 -5 36 -13 53 -36 73 -41 34 -79 32 -119 -5z M91 3084 l-31 -26 0 -1292 0 -1293 23 -21 23 -22 706 0 706 0 26 31 26 31 0 1269 c0 1380 3 1311 -55 1337 -19 9 -201 12 -710 12 l-683 0 -31 -26z m1294 -1319 l0 -1155 -577 0 -578 0 0 1155 0 1155 578 0 577 0 0 -1155z M758 1181 c-76 -25 -119 -82 -120 -160 0 -59 20 -100 69 -140 67 -55 148 -53 212 5 50 45 65 81 59 149 -5 62 -28 100 -75 127 -36 22 -108 31 -145 19z"
                      fill="grey"
                    />
                  </g>
                </svg>
                Pertinence
              </button>
            </li>
            <li>
              <button
                className="trier_b"
                type="button"
                data-order="date"
                id="les_plus_recents"
                data-tippy-content="Cliquez ici pour filtrer les résultats par date de publication"
                onClick={this.handleChangeOrder}
              >
                <svg
                  className="trier_s"
                  id="les_plus_recents"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlnsXlink="http://www.w3.org/1999/xlink"
                  width={30}
                  height={30}
                  viewBox="0, 0, 400,400"
                >
                  <g id="svgg">
                    <path
                      id="date"
                      d="M171.484 14.428 C -0.165 42.466,-48.854 262.212,95.169 358.859 C 171.193 409.875,277.631 396.419,338.846 328.053 C 352.075 313.279,365.625 292.791,365.625 287.563 C 365.625 284.765,362.238 282.031,358.770 282.031 C 355.857 282.031,355.615 282.244,351.899 288.075 C 323.321 332.912,290.962 357.647,242.969 371.337 C 204.053 382.438,154.674 376.539,116.653 356.248 C 44.704 317.851,7.698 232.885,29.376 155.859 C 70.656 9.181,261.565 -21.340,345.874 105.260 C 352.706 115.518,352.727 115.246,344.768 119.835 C 328.892 128.991,327.803 129.994,328.691 134.640 C 329.237 137.497,330.672 138.149,348.508 143.652 C 378.778 152.991,377.036 153.557,383.059 132.422 C 390.456 106.466,390.842 104.571,389.187 102.346 C 386.130 98.240,384.472 98.409,373.732 103.925 C 364.370 108.732,363.898 108.887,363.074 107.407 C 326.607 41.975,245.076 2.408,171.484 14.428 M125.721 152.284 C 122.860 155.145,122.814 157.712,125.564 161.073 C 133.055 170.227,196.956 238.465,210.084 251.329 C 215.880 257.008,216.927 256.898,225.101 249.751 C 246.662 230.898,284.375 194.131,284.375 191.962 C 284.375 189.909,282.295 186.206,280.824 185.642 C 276.209 183.871,277.787 182.640,241.654 216.174 C 222.000 234.415,217.530 238.281,216.099 238.281 C 215.618 238.281,211.739 234.502,207.477 229.883 C 180.999 201.182,133.422 150.883,132.371 150.479 C 129.881 149.524,127.960 150.044,125.721 152.284 "
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Les plus récents
              </button>
            </li>
          </ul>
          <fieldset>
            <label id="Mode">
              <button
                className="button_hide"
                style={{
                  margin: "0",
                  padding: "0",
                  height: "35px",
                  width: "100%"
                }}
                value="2"
                onClick={this.HideAndDisplaySB}
              >
                <b id="2">Période</b>
              </button>
            </label>
          </fieldset>
          <ul id="listbutton" className="trie2">
            <li>
              <button
                onClick={this.handleChangeFreshness}
                className="periode_b"
                type="button"
                data-tippy-content="Cliquez ici pour n'appliquer aucun filtre de temps"
                id="all"
              >
                <svg
                  className="periode_s"
                  id="all"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    stroke="none"
                  >
                    <path
                      id="all"
                      d="M47 5113 c-9 -8 -9 -1376 -1 -1398 18 -45 24 -45 738 -45 480 0 682 3 700 11 13 7 30 23 35 38 8 18 10 238 9 711 l-3 685 -736 3 c-404 1 -739 -1 -742 -5z m1333 -693 l0 -600 -600 0 -600 0 0 600 0 600 600 0 600 0 0 -600z M1810 4423 c1 -533 4 -702 13 -714 30 -39 37 -39 736 -39 665 0 681 0 701 20 11 11 22 30 25 42 3 13 4 329 3 703 l-3 680 -737 3 -738 2 0 -697z m1330 -3 l0 -600 -595 0 -595 0 0 600 0 600 595 0 595 0 0 -600z M3610 4416 l0 -705 26 -20 c26 -21 34 -21 715 -21 676 0 689 0 709 20 20 20 20 33 20 725 l0 705 -735 0 -735 0 0 -704z m1330 4 l0 -600 -600 0 -600 0 0 600 0 600 600 0 600 0 0 -600z M90 3303 c-51 -9 -50 12 -50 -738 0 -618 2 -703 16 -723 l15 -22 707 0 c389 0 712 4 718 8 33 22 34 49 34 740 0 664 -1 691 -19 713 l-19 24 -689 1 c-378 1 -699 -1 -713 -3z m1290 -743 l0 -600 -600 0 -600 0 0 600 0 600 600 0 600 0 0 -600z M1821 3284 c-21 -26 -21 -34 -21 -716 0 -729 0 -734 45 -752 9 -3 328 -6 709 -6 610 0 694 2 714 16 l22 15 0 718 c0 683 -1 719 -18 734 -17 16 -82 17 -725 17 l-706 0 -20 -26z m1319 -719 l0 -595 -595 0 -595 0 0 595 0 595 595 0 595 0 0 -595z M3653 3300 c-12 -5 -26 -18 -32 -29 -8 -13 -11 -242 -11 -713 0 -612 2 -696 16 -716 l15 -22 704 0 c626 0 705 2 719 16 14 14 16 93 16 725 0 696 0 709 -20 729 -20 20 -33 20 -702 19 -376 0 -693 -4 -705 -9z m1287 -740 l0 -600 -600 0 -600 0 0 600 0 600 600 0 600 0 0 -600z M77 1438 c-15 -5 -29 -19 -32 -31 -3 -12 -4 -332 -3 -712 l3 -690 740 0 740 0 3 698 2 698 -24 24 -25 25 -688 -1 c-434 0 -698 -4 -716 -11z m1303 -733 l0 -595 -600 0 -600 0 0 595 0 595 600 0 600 0 0 -595z M1834 1425 l-24 -24 2 -698 3 -698 735 0 735 0 3 690 c1 380 0 699 -3 711 -10 43 -22 44 -741 44 l-685 0 -25 -25z m1306 -720 l0 -595 -595 0 -595 0 0 595 0 595 595 0 595 0 0 -595z M3636 1429 l-26 -20 0 -705 0 -704 735 0 735 0 0 709 0 710 -22 15 c-20 14 -104 16 -709 16 -679 0 -687 0 -713 -21z m1304 -724 l0 -595 -600 0 -600 0 0 595 0 595 600 0 600 0 0 -595z"
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Toutes
              </button>
            </li>
            <li>
              <button
                onClick={this.handleChangeFreshness}
                className="periode_b"
                type="button"
                id="hour"
                data-tippy-content="Cliquez ici pour filtrer les résultats de la dernière heure"
              >
                <svg
                  className="periode_s"
                  id="hour"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    fill="#000000"
                    stroke="none"
                  >
                    <path
                      id="hour"
                      d="M2190 5079 c-145 -22 -275 -50 -409 -90 -113 -33 -234 -77 -241 -88 -3 -4 -57 -31 -120 -60 -63 -29 -140 -68 -171 -87 -31 -19 -61 -34 -67 -34 -6 0 -15 -6 -19 -13 -8 -13 -143 -111 -186 -134 -57 -32 -397 -368 -397 -394 0 -4 -6 -9 -14 -12 -7 -3 -49 -58 -91 -121 -43 -64 -81 -116 -86 -116 -4 0 -11 -10 -15 -22 -3 -12 -19 -43 -35 -68 -16 -26 -52 -98 -81 -161 -28 -63 -56 -117 -62 -121 -7 -5 -7 -8 -1 -8 6 0 5 -4 -1 -8 -21 -13 -91 -237 -132 -418 -45 -195 -57 -318 -57 -569 0 -251 12 -374 57 -575 27 -123 107 -380 119 -380 4 0 6 -7 3 -15 -4 -8 -1 -15 7 -15 7 0 10 -3 6 -6 -3 -4 0 -13 8 -21 8 -8 18 -26 21 -41 10 -41 133 -276 150 -285 8 -5 12 -12 9 -18 -4 -5 -1 -9 5 -9 6 0 8 -5 5 -10 -3 -5 -2 -10 4 -10 5 0 28 -30 52 -67 43 -70 58 -89 138 -182 109 -128 363 -371 387 -371 5 0 29 -19 54 -41 48 -44 124 -99 136 -99 4 0 34 -17 68 -39 122 -76 274 -150 401 -194 149 -52 231 -77 251 -77 8 0 14 -4 14 -8 0 -10 117 -36 257 -57 142 -21 634 -21 771 0 136 20 252 47 252 57 0 4 10 8 23 8 52 0 489 163 506 188 4 5 44 29 92 54 134 71 233 139 383 262 62 51 286 272 306 302 8 12 44 60 80 106 127 161 220 324 220 384 0 41 -42 74 -95 74 -25 0 -45 -3 -45 -8 0 -4 -13 -22 -29 -40 -17 -17 -28 -32 -25 -32 3 0 -4 -9 -14 -20 -11 -12 -28 -38 -38 -58 -29 -57 -125 -193 -140 -199 -8 -3 -14 -10 -14 -15 0 -6 -26 -40 -57 -75 -32 -35 -73 -83 -91 -106 -18 -23 -48 -53 -67 -67 -19 -14 -67 -53 -107 -88 -40 -35 -84 -72 -98 -84 -43 -36 -163 -114 -216 -141 -29 -15 -59 -33 -68 -42 -23 -23 -245 -123 -351 -157 -49 -16 -103 -35 -120 -42 -159 -68 -529 -112 -808 -95 -188 11 -498 64 -517 89 -3 3 -48 20 -100 37 -197 64 -293 108 -470 215 -129 77 -189 119 -218 150 -15 16 -40 36 -57 45 -44 23 -307 292 -348 356 -19 30 -48 66 -63 81 -16 14 -26 26 -22 26 4 0 -3 11 -15 24 -12 13 -31 41 -43 62 -11 22 -42 76 -67 122 -25 45 -51 98 -58 117 -7 19 -17 35 -22 35 -4 0 -5 5 -2 10 3 6 2 10 -3 10 -30 0 -157 406 -177 568 -4 28 -10 52 -14 52 -4 0 -5 14 -3 31 3 20 0 34 -9 40 -21 12 -21 556 0 568 9 6 12 20 9 40 -2 17 0 31 5 31 5 0 7 14 5 30 -3 17 -2 30 2 30 3 0 11 32 18 72 15 88 63 254 104 363 17 44 35 92 40 108 6 15 15 27 20 27 5 0 6 5 3 10 -3 6 -1 10 5 10 6 0 8 5 5 10 -3 6 -2 10 3 10 4 0 27 40 51 89 23 49 64 124 91 165 27 42 46 76 42 76 -4 1 2 8 13 18 25 22 145 169 145 179 0 9 273 273 282 273 11 0 152 110 156 121 2 5 7 9 12 9 5 0 45 23 89 50 44 28 120 69 168 92 49 23 94 48 101 54 6 7 22 16 35 19 12 4 54 20 93 35 126 52 449 130 535 130 15 0 29 6 32 13 5 16 564 18 575 1 4 -6 48 -16 97 -24 101 -15 281 -59 388 -95 95 -32 201 -75 207 -85 3 -4 39 -23 80 -43 101 -48 229 -120 256 -144 42 -38 102 -83 109 -83 14 0 143 -110 160 -136 9 -14 30 -34 48 -44 18 -11 29 -20 25 -20 -3 0 21 -26 54 -57 33 -32 66 -69 73 -83 7 -14 27 -38 44 -55 31 -30 101 -120 101 -130 0 -9 94 -149 107 -160 25 -21 -31 -65 -184 -145 -45 -23 -90 -51 -99 -61 -24 -27 -24 -107 1 -125 18 -14 149 -56 290 -95 44 -12 2 -25 85 -28 8 -11 35 -20 114 -36 139 -29 157 -22 187 78 12 39 27 75 32 78 5 4 7 14 4 22 -3 9 -2 17 3 19 13 4 100 353 100 400 0 43 -34 88 -67 88 -30 0 -91 -20 -105 -34 -7 -7 -50 -32 -95 -57 -92 -49 -87 -51 -129 30 -28 55 -76 124 -99 143 -11 10 -17 17 -12 18 4 0 -1 8 -10 18 -10 11 -38 47 -62 81 -80 112 -449 471 -485 471 -8 0 -127 82 -147 101 -9 9 -47 32 -85 51 -38 20 -82 43 -99 52 -16 9 -61 30 -100 47 -38 17 -73 35 -76 40 -17 27 -430 145 -589 168 -250 36 -568 40 -770 10z M2159 3349 c-13 -12 -41 -30 -61 -40 -21 -11 -38 -23 -38 -28 0 -4 -12 -14 -27 -22 -16 -7 -56 -33 -89 -56 -34 -24 -66 -43 -72 -43 -5 0 -20 -11 -33 -25 -13 -13 -30 -25 -36 -25 -10 0 -13 -30 -13 -115 0 -133 3 -136 75 -80 47 36 185 125 195 125 6 0 13 6 16 14 3 7 26 24 51 37 25 13 48 29 50 36 3 7 9 13 14 13 5 0 9 -296 9 -700 l0 -700 110 0 110 0 0 815 0 815 -118 0 c-106 0 -121 -2 -143 -21z M2860 2555 l0 -815 105 0 105 0 -2 360 c-2 198 0 360 5 360 4 0 7 22 7 50 0 99 70 214 147 242 18 7 33 15 33 19 0 3 26 12 58 18 78 15 147 1 218 -44 54 -35 93 -92 94 -137 0 -10 3 -18 8 -18 4 0 6 -18 4 -40 -3 -25 0 -40 7 -40 8 0 11 -111 11 -385 l0 -385 100 0 100 0 0 409 c0 491 -11 600 -70 663 -11 12 -20 27 -20 34 0 7 -15 23 -32 35 -18 13 -37 29 -43 36 -5 7 -37 23 -70 35 -81 31 -290 33 -376 5 -61 -20 -134 -81 -159 -132 -14 -27 -15 -5 -18 258 l-2 287 -105 0 -105 0 0 -815z M790 2435 l0 -95 370 0 370 0 0 95 0 95 -370 0 -370 0 0 -95z"
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Moins d'une heure
              </button>
            </li>
            <li>
              <button
                onClick={this.handleChangeFreshness}
                className="periode_b"
                type="button"
                id="day"
                data-tippy-content="Cliquez ici pour filtrer les résultats des dernière 24 heures"
              >
                <svg
                  className="periode_s"
                  id="day"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    fill="#000000"
                    stroke="none"
                  >
                    <path
                      id="day"
                      d="M2190 5079 c-145 -22 -275 -50 -409 -90 -113 -33 -234 -77 -241 -88 -3 -4 -57 -31 -120 -60 -63 -29 -140 -68 -171 -87 -31 -19 -61 -34 -67 -34 -6 0 -15 -6 -19 -13 -8 -13 -143 -111 -186 -134 -57 -32 -397 -368 -397 -394 0 -4 -6 -9 -14 -12 -7 -3 -49 -58 -91 -121 -43 -64 -81 -116 -86 -116 -4 0 -11 -10 -15 -22 -3 -12 -19 -43 -35 -68 -16 -26 -52 -98 -81 -161 -28 -63 -56 -117 -62 -121 -7 -5 -7 -8 -1 -8 6 0 5 -4 -1 -8 -21 -13 -91 -237 -132 -418 -45 -195 -57 -318 -57 -569 0 -251 12 -374 57 -575 27 -123 107 -380 119 -380 4 0 6 -7 3 -15 -4 -8 -1 -15 7 -15 7 0 10 -3 6 -6 -3 -4 0 -13 8 -21 8 -8 18 -26 21 -41 10 -41 133 -276 150 -285 8 -5 12 -12 9 -18 -4 -5 -1 -9 5 -9 6 0 8 -5 5 -10 -3 -5 -2 -10 4 -10 5 0 28 -30 52 -67 43 -70 58 -89 138 -182 109 -128 363 -371 387 -371 5 0 29 -19 54 -41 48 -44 124 -99 136 -99 4 0 34 -17 68 -39 122 -76 274 -150 401 -194 149 -52 231 -77 251 -77 8 0 14 -4 14 -8 0 -10 117 -36 257 -57 142 -21 634 -21 771 0 136 20 252 47 252 57 0 4 10 8 23 8 52 0 489 163 506 188 4 5 44 29 92 54 134 71 233 139 383 262 62 51 286 272 306 302 8 12 44 60 80 106 127 161 220 324 220 384 0 41 -42 74 -95 74 -25 0 -45 -3 -45 -8 0 -4 -13 -22 -29 -40 -17 -17 -28 -32 -25 -32 3 0 -4 -9 -14 -20 -11 -12 -28 -38 -38 -58 -29 -57 -125 -193 -140 -199 -8 -3 -14 -10 -14 -15 0 -6 -26 -40 -57 -75 -32 -35 -73 -83 -91 -106 -18 -23 -48 -53 -67 -67 -19 -14 -67 -53 -107 -88 -40 -35 -84 -72 -98 -84 -43 -36 -163 -114 -216 -141 -29 -15 -59 -33 -68 -42 -23 -23 -245 -123 -351 -157 -49 -16 -103 -35 -120 -42 -159 -68 -529 -112 -808 -95 -188 11 -498 64 -517 89 -3 3 -48 20 -100 37 -197 64 -293 108 -470 215 -129 77 -189 119 -218 150 -15 16 -40 36 -57 45 -44 23 -307 292 -348 356 -19 30 -48 66 -63 81 -16 14 -26 26 -22 26 4 0 -3 11 -15 24 -12 13 -31 41 -43 62 -11 22 -42 76 -67 122 -25 45 -51 98 -58 117 -7 19 -17 35 -22 35 -4 0 -5 5 -2 10 3 6 2 10 -3 10 -30 0 -157 406 -177 568 -4 28 -10 52 -14 52 -4 0 -5 14 -3 31 3 20 0 34 -9 40 -21 12 -21 556 0 568 9 6 12 20 9 40 -2 17 0 31 5 31 5 0 7 14 5 30 -3 17 -2 30 2 30 3 0 11 32 18 72 15 88 63 254 104 363 17 44 35 92 40 108 6 15 15 27 20 27 5 0 6 5 3 10 -3 6 -1 10 5 10 6 0 8 5 5 10 -3 6 -2 10 3 10 4 0 27 40 51 89 23 49 64 124 91 165 27 42 46 76 42 76 -4 1 2 8 13 18 25 22 145 169 145 179 0 9 273 273 282 273 11 0 152 110 156 121 2 5 7 9 12 9 5 0 45 23 89 50 44 28 120 69 168 92 49 23 94 48 101 54 6 7 22 16 35 19 12 4 54 20 93 35 126 52 449 130 535 130 15 0 29 6 32 13 5 16 564 18 575 1 4 -6 48 -16 97 -24 101 -15 281 -59 388 -95 95 -32 201 -75 207 -85 3 -4 39 -23 80 -43 101 -48 229 -120 256 -144 42 -38 102 -83 109 -83 14 0 143 -110 160 -136 9 -14 30 -34 48 -44 18 -11 29 -20 25 -20 -3 0 21 -26 54 -57 33 -32 66 -69 73 -83 7 -14 27 -38 44 -55 31 -30 101 -120 101 -130 0 -9 94 -149 107 -160 25 -21 -31 -65 -184 -145 -45 -23 -90 -51 -99 -61 -24 -27 -24 -107 1 -125 18 -14 149 -56 290 -95 44 -12 82 -25 85 -28 8 -11 35 -20 114 -36 139 -29 157 -22 187 78 12 39 27 75 32 78 5 4 7 14 4 22 -3 9 -2 17 3 19 13 4 100 353 100 400 0 43 -34 88 -67 88 -30 0 -91 -20 -105 -34 -7 -7 -50 -32 -95 -57 -92 -49 -87 -51 -129 30 -28 55 -76 124 -99 143 -11 10 -17 17 -12 18 4 0 -1 8 -10 18 -10 11 -38 47 -62 81 -80 112 -449 471 -485 471 -8 0 -127 82 -147 101 -9 9 -47 32 -85 51 -38 20 -82 43 -99 52 -16 9 -61 30 -100 47 -38 17 -73 35 -76 40 -17 27 -430 145 -589 168 -250 36 -568 40 -770 10z M1635 3390 c-121 -24 -224 -89 -288 -180 -43 -62 -77 -162 -77 -226 l0 -44 89 0 89 0 7 48 c22 151 122 236 280 237 68 0 89 -4 137 -28 139 -68 182 -211 109 -364 -42 -88 -93 -149 -420 -508 l-301 -329 0 -68 0 -68 485 0 485 0 0 85 0 85 -351 2 -351 3 183 195 c237 253 329 360 385 443 141 209 138 422 -7 581 -103 113 -290 169 -454 136z M2791 2856 l-331 -524 0 -81 0 -81 355 0 355 0 0 -155 0 -155 90 0 90 0 0 155 0 155 105 0 105 0 0 85 0 85 -105 0 -105 0 0 520 0 520 -114 0 -114 0 -331 -524z m379 -121 l0 -395 -251 0 c-139 0 -249 4 -247 9 5 14 491 781 495 781 2 0 3 -178 3 -395z M3820 2620 l0 -760 95 0 95 0 0 368 c0 404 3 432 59 510 60 82 183 126 293 103 79 -17 133 -59 166 -129 l27 -57 3 -397 3 -398 90 0 90 0 -3 438 c-3 430 -3 438 -26 494 -31 76 -99 150 -170 185 -53 26 -65 28 -187 28 -115 0 -136 -3 -180 -23 -56 -26 -93 -58 -136 -116 l-29 -39 0 276 0 277 -95 0 -95 0 0 -760z M370 2505 l0 -85 335 0 335 0 0 85 0 85 -335 0 -335 0 0 -85z"
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Moins de 24 heures
              </button>
            </li>
            <li>
              <button
                onClick={this.handleChangeFreshness}
                className="periode_b"
                type="button"
                id="week"
                data-tippy-content="Cliquez ici pour filtrer les résultats de la dernière semaine"
              >
                <svg
                  className="periode_s"
                  id="week"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    fill="#000000"
                    stroke="none"
                  >
                    <path
                      id="week"
                      d="M2190 5079 c-145 -22 -275 -50 -409 -90 -113 -33 -234 -77 -241 -88 -3 -4 -57 -31 -120 -60 -63 -29 -140 -68 -171 -87 -31 -19 -61 -34 -67 -34 -6 0 -15 -6 -19 -13 -8 -13 -143 -111 -186 -134 -57 -32 -397 -368 -397 -394 0 -4 -6 -9 -14 -12 -7 -3 -49 -58 -91 -121 -43 -64 -81 -116 -86 -116 -4 0 -11 -10 -15 -22 -3 -12 -19 -43 -35 -68 -16 -26 -52 -98 -81 -161 -28 -63 -56 -117 -62 -121 -7 -5 -7 -8 -1 -8 6 0 5 -4 -1 -8 -21 -13 -91 -237 -132 -418 -45 -195 -57 -318 -57 -569 0 -251 12 -374 57 -575 27 -123 107 -380 119 -380 4 0 6 -7 3 -15 -4 -8 -1 -15 7 -15 7 0 10 -3 6 -6 -3 -4 0 -13 8 -21 8 -8 18 -26 21 -41 10 -41 133 -276 150 -285 8 -5 12 -12 9 -18 -4 -5 -1 -9 5 -9 6 0 8 -5 5 -10 -3 -5 -2 -10 4 -10 5 0 28 -30 52 -67 43 -70 58 -89 138 -182 109 -128 363 -371 387 -371 5 0 29 -19 54 -41 48 -44 124 -99 136 -99 4 0 34 -17 68 -39 122 -76 274 -150 401 -194 149 -52 231 -77 251 -77 8 0 14 -4 14 -8 0 -10 117 -36 257 -57 142 -21 634 -21 771 0 136 20 252 47 252 57 0 4 10 8 23 8 52 0 489 163 506 188 4 5 44 29 92 54 134 71 233 139 383 262 62 51 286 272 306 302 8 12 44 60 80 106 127 161 220 324 220 384 0 41 -42 74 -95 74 -25 0 -45 -3 -45 -8 0 -4 -13 -22 -29 -40 -17 -17 -28 -32 -25 -32 3 0 -4 -9 -14 -20 -11 -12 -28 -38 -38 -58 -29 -57 -125 -193 -140 -199 -8 -3 -14 -10 -14 -15 0 -6 -26 -40 -57 -75 -32 -35 -73 -83 -91 -106 -18 -23 -48 -53 -67 -67 -19 -14 -67 -53 -107 -88 -40 -35 -84 -72 -98 -84 -43 -36 -163 -114 -216 -141 -29 -15 -59 -33 -68 -42 -23 -23 -245 -123 -351 -157 -49 -16 -103 -35 -120 -42 -159 -68 -529 -112 -808 -95 -188 11 -498 64 -517 89 -3 3 -48 20 -100 37 -197 64 -293 108 -470 215 -129 77 -189 119 -218 150 -15 16 -40 36 -57 45 -44 23 -307 292 -348 356 -19 30 -48 66 -63 81 -16 14 -26 26 -22 26 4 0 -3 11 -15 24 -12 13 -31 41 -43 62 -11 22 -42 76 -67 122 -25 45 -51 98 -58 117 -7 19 -17 35 -22 35 -4 0 -5 5 -2 10 3 6 2 10 -3 10 -30 0 -157 406 -177 568 -4 28 -10 52 -14 52 -4 0 -5 14 -3 31 3 20 0 34 -9 40 -21 12 -21 556 0 568 9 6 12 20 9 40 -2 17 0 31 5 31 5 0 7 14 5 30 -3 17 -2 30 2 30 3 0 11 32 18 72 15 88 63 254 104 363 17 44 35 92 40 108 6 15 15 27 20 27 5 0 6 5 3 10 -3 6 -1 10 5 10 6 0 8 5 5 10 -3 6 -2 10 3 10 4 0 27 40 51 89 23 49 64 124 91 165 27 42 46 76 42 76 -4 1 2 8 13 18 25 22 145 169 145 179 0 9 273 273 282 273 11 0 152 110 156 121 2 5 7 9 12 9 5 0 45 23 89 50 44 28 120 69 168 92 49 23 94 48 101 54 6 7 22 16 35 19 12 4 54 20 93 35 126 52 449 130 535 130 15 0 29 6 32 13 5 16 564 18 575 1 4 -6 48 -16 97 -24 101 -15 281 -59 388 -95 95 -32 201 -75 207 -85 3 -4 39 -23 80 -43 101 -48 229 -120 256 -144 42 -38 102 -83 109 -83 14 0 143 -110 160 -136 9 -14 30 -34 48 -44 18 -11 29 -20 25 -20 -3 0 21 -26 54 -57 33 -32 66 -69 73 -83 7 -14 27 -38 44 -55 31 -30 101 -120 101 -130 0 -9 94 -149 107 -160 25 -21 -31 -65 -184 -145 -45 -23 -90 -51 -99 -61 -24 -27 -24 -107 1 -125 18 -14 149 -56 290 -95 44 -12 82 -25 85 -28 8 -11 35 -20 114 -36 139 -29 157 -22 187 78 12 39 27 75 32 78 5 4 7 14 4 22 -3 9 -2 17 3 19 13 4 100 353 100 400 0 43 -34 88 -67 88 -30 0 -91 -20 -105 -34 -7 -7 -50 -32 -95 -57 -92 -49 -87 -51 -129 30 -28 55 -76 124 -99 143 -11 10 -17 17 -12 18 4 0 -1 8 -10 18 -10 11 -38 47 -62 81 -80 112 -449 471 -485 471 -8 0 -127 82 -147 101 -9 9 -47 32 -85 51 -38 20 -82 43 -99 52 -16 9 -61 30 -100 47 -38 17 -73 35 -76 40 -17 27 -430 145 -589 168 -250 36 -568 40 -770 10z M3350 3419 c-54 -11 -90 -59 -90 -117 0 -75 48 -122 125 -122 77 0 125 47 125 122 0 83 -72 136 -160 117z M2060 3295 l0 -85 388 -2 389 -3 -339 -669 c-186 -367 -338 -672 -338 -677 0 -5 45 -9 100 -9 l100 0 335 670 335 670 0 95 0 95 -485 0 -485 0 0 -85z M3290 2351 l0 -648 -23 -34 c-26 -40 -79 -69 -124 -69 l-33 0 0 -86 0 -87 73 5 c94 6 166 38 217 95 77 88 74 56 78 806 l3 667 -96 0 -95 0 0 -649z M1190 2505 l0 -85 335 0 335 0 0 85 0 85 -335 0 -335 0 0 -85z"
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Dernière semaine
              </button>
            </li>
            <li>
              <button
                onClick={this.handleChangeFreshness}
                className="periode_b"
                type="button"
                id="month"
                data-tippy-content="Cliquez ici pour filtrer les résultats du dernier mois"
              >
                <svg
                  className="periode_s"
                  id="month"
                  version={1.0}
                  xmlns="http://www.w3.org/2000/svg"
                  width="30px"
                  height="30px"
                  viewBox="0 0 512.000000 512.000000"
                  preserveAspectRatio="xMidYMid meet"
                >
                  <g
                    transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                    stroke="none"
                  >
                    <path
                      id="month"
                      d="M2190 5079 c-145 -22 -275 -50 -409 -90 -113 -33 -234 -77 -241 -88 -3 -4 -57 -31 -120 -60 -63 -29 -140 -68 -171 -87 -31 -19 -61 -34 -67 -34 -6 0 -15 -6 -19 -13 -8 -13 -143 -111 -186 -134 -57 -32 -397 -368 -397 -394 0 -4 -6 -9 -14 -12 -7 -3 -49 -58 -91 -121 -43 -64 -81 -116 -86 -116 -4 0 -11 -10 -15 -22 -3 -12 -19 -43 -35 -68 -16 -26 -52 -98 -81 -161 -28 -63 -56 -117 -62 -121 -7 -5 -7 -8 -1 -8 6 0 5 -4 -1 -8 -21 -13 -91 -237 -132 -418 -45 -195 -57 -318 -57 -569 0 -251 12 -374 57 -575 27 -123 107 -380 119 -380 4 0 6 -7 3 -15 -4 -8 -1 -15 7 -15 7 0 10 -3 6 -6 -3 -4 0 -13 8 -21 8 -8 18 -26 21 -41 10 -41 133 -276 150 -285 8 -5 12 -12 9 -18 -4 -5 -1 -9 5 -9 6 0 8 -5 5 -10 -3 -5 -2 -10 4 -10 5 0 28 -30 52 -67 43 -70 58 -89 138 -182 109 -128 363 -371 387 -371 5 0 29 -19 54 -41 48 -44 124 -99 136 -99 4 0 34 -17 68 -39 122 -76 274 -150 401 -194 149 -52 231 -77 251 -77 8 0 14 -4 14 -8 0 -10 117 -36 257 -57 142 -21 634 -21 771 0 136 20 252 47 252 57 0 4 10 8 23 8 52 0 489 163 506 188 4 5 44 29 92 54 134 71 233 139 383 262 62 51 286 272 306 302 8 12 44 60 80 106 127 161 220 324 220 384 0 41 -42 74 -95 74 -25 0 -45 -3 -45 -8 0 -4 -13 -22 -29 -40 -17 -17 -28 -32 -25 -32 3 0 -4 -9 -14 -20 -11 -12 -28 -38 -38 -58 -29 -57 -125 -193 -140 -199 -8 -3 -14 -10 -14 -15 0 -6 -26 -40 -57 -75 -32 -35 -73 -83 -91 -106 -18 -23 -48 -53 -67 -67 -19 -14 -67 -53 -107 -88 -40 -35 -84 -72 -98 -84 -43 -36 -163 -114 -216 -141 -29 -15 -59 -33 -68 -42 -23 -23 -245 -123 -351 -157 -49 -16 -103 -35 -120 -42 -159 -68 -529 -112 -808 -95 -188 11 -498 64 -517 89 -3 3 -48 20 -100 37 -197 64 -293 108 -470 215 -129 77 -189 119 -218 150 -15 16 -40 36 -57 45 -44 23 -307 292 -348 356 -19 30 -48 66 -63 81 -16 14 -26 26 -22 26 4 0 -3 11 -15 24 -12 13 -31 41 -43 62 -11 22 -42 76 -67 122 -25 45 -51 98 -58 117 -7 19 -17 35 -22 35 -4 0 -5 5 -2 10 3 6 2 10 -3 10 -30 0 -157 406 -177 568 -4 28 -10 52 -14 52 -4 0 -5 14 -3 31 3 20 0 34 -9 40 -21 12 -21 556 0 568 9 6 12 20 9 40 -2 17 0 31 5 31 5 0 7 14 5 30 -3 17 -2 30 2 30 3 0 11 32 18 72 15 88 63 254 104 363 17 44 35 92 40 108 6 15 15 27 20 27 5 0 6 5 3 10 -3 6 -1 10 5 10 6 0 8 5 5 10 -3 6 -2 10 3 10 4 0 27 40 51 89 23 49 64 124 91 165 27 42 46 76 42 76 -4 1 2 8 13 18 25 22 145 169 145 179 0 9 273 273 282 273 11 0 152 110 156 121 2 5 7 9 12 9 5 0 45 23 89 50 44 28 120 69 168 92 49 23 94 48 101 54 6 7 22 16 35 19 12 4 54 20 93 35 126 52 449 130 535 130 15 0 29 6 32 13 5 16 564 18 575 1 4 -6 48 -16 97 -24 101 -15 281 -59 388 -95 95 -32 201 -75 207 -85 3 -4 39 -23 80 -43 101 -48 229 -120 256 -144 42 -38 102 -83 109 -83 14 0 143 -110 160 -136 9 -14 30 -34 48 -44 18 -11 29 -20 25 -20 -3 0 21 -26 54 -57 33 -32 66 -69 73 -83 7 -14 27 -38 44 -55 31 -30 101 -120 101 -130 0 -9 94 -149 107 -160 25 -21 -31 -65 -184 -145 -45 -23 -90 -51 -99 -61 -24 -27 -24 -107 1 -125 18 -14 149 -56 290 -95 44 -12 82 -25 85 -28 8 -11 35 -20 114 -36 139 -29 157 -22 187 78 12 39 27 75 32 78 5 4 7 14 4 22 -3 9 -2 17 3 19 13 4 100 353 100 400 0 43 -34 88 -67 88 -30 0 -91 -20 -105 -34 -7 -7 -50 -32 -95 -57 -92 -49 -87 -51 -129 30 -28 55 -76 124 -99 143 -11 10 -17 17 -12 18 4 0 -1 8 -10 18 -10 11 -38 47 -62 81 -80 112 -449 471 -485 471 -8 0 -127 82 -147 101 -9 9 -47 32 -85 51 -38 20 -82 43 -99 52 -16 9 -61 30 -100 47 -38 17 -73 35 -76 40 -17 27 -430 145 -589 168 -250 36 -568 40 -770 10z M4080 3419 c-54 -11 -90 -59 -90 -117 0 -75 48 -122 125 -122 77 0 125 47 125 122 0 83 -72 136 -160 117z M1790 3384 c-189 -41 -332 -180 -355 -346 l-7 -48 95 0 95 0 7 40 c11 64 60 120 139 160 63 31 79 35 150 35 63 0 92 -5 131 -23 101 -46 139 -108 140 -222 0 -64 -4 -82 -28 -122 -53 -90 -160 -138 -309 -138 l-78 0 0 -85 0 -85 86 0 c240 0 384 -103 384 -274 -1 -107 -54 -185 -160 -235 -49 -23 -68 -26 -165 -26 -94 0 -117 3 -163 24 -68 31 -140 109 -148 162 l-7 39 -100 0 -100 0 7 -47 c16 -122 107 -239 231 -298 90 -43 167 -58 285 -58 219 1 397 97 477 260 26 54 28 67 28 173 0 111 -1 118 -33 183 -47 94 -114 146 -241 183 -8 3 9 16 36 29 268 134 249 540 -31 682 -99 50 -240 65 -366 37z M3090 3382 c-87 -23 -146 -59 -213 -132 -124 -133 -187 -348 -187 -635 0 -499 190 -778 530 -778 340 0 530 279 530 778 0 290 -63 503 -190 638 -32 35 -81 75 -108 90 -102 55 -242 70 -362 39z m209 -168 c97 -28 186 -137 224 -274 29 -103 40 -217 35 -373 -9 -281 -74 -447 -206 -525 -41 -24 -57 -27 -132 -27 -75 0 -91 3 -132 27 -132 78 -197 244 -206 525 -11 357 77 584 250 644 66 23 100 23 167 3z M4020 2351 l0 -648 -23 -34 c-26 -40 -79 -69 -124 -69 l-33 0 0 -86 0 -87 73 5 c94 6 166 38 217 95 77 88 74 56 78 806 l3 667 -96 0 -95 0 0 -649z M460 2505 l0 -85 335 0 335 0 0 85 0 85 -335 0 -335 0 0 -85z"
                      stroke="none"
                      fill="grey"
                    />
                  </g>
                </svg>
                Dernier mois
              </button>
            </li>
          </ul>
          <fieldset>
            <label id="Mode">
              <button
                style={{
                  margin: "0",
                  padding: "0",
                  height: "35px",
                  width: "100%"
                }}
                value="3"
                onClick={this.HideAndDisplaySB}
              >
                <b id="3">Source</b>
              </button>
            </label>
          </fieldset>
          <div id="ListSources">
            <ul id="listbutton" className="trie3">
              {toAppendSources}
            </ul>
          </div>
        </form>
      </div>
    );
  }
}
export default Sidebar;
